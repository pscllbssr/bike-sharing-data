---
title: "Analysis of bike sharing data"
author: "Elise Gourri, Emilia Marlene Ribeiro Peixoto, Pascal Albisser"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: yes
    toc_float: TRUE
    code_folding: hide
---

```{r, message = FALSE, echo = FALSE}
library(kableExtra)
library(ggplot2)
library(dplyr)
library(data.table)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(knitr.table.format = function() {
  if (knitr::is_latex_output())
    "latex" else "pipe"
})
```

# Dataset

Our Dataset, pls run `scripts/download-data.R` first.

```{r head_data}
data <- fread("data/trips_s.csv")
kable(head(data))
```


```{r trips_per_city}
data %>% 
  ggplot(mapping = aes(x = city, fill = city)) + 
    geom_bar() +
    labs(title = "Number of trips per city")
```


```{r trips_per_month}
data %>% 
  group_by(city, year_month = paste(format(started_at, "%Y-%m"), "-01", sep="")) %>% 
  summarise(n = n()) %>% 
  ggplot(mapping = aes(y = n, x = as.Date(year_month), group = city, colour = city)) + 
    geom_line() +
    geom_point() +
    labs(title = "Sum of trips per city and month", y = "number of trips", x = "")
```

# Weather

```{r precipitations}
data %>% 
  group_by(city, year_month = paste(format(started_at, "%Y-%m"), "-01", sep="")) %>% 
  summarise(precipitations = sum(prcp)) %>% 
  ggplot(mapping = aes(y = precipitations, x = as.Date(year_month), group = city, colour = city)) + 
    geom_line() +
    geom_point() +
    labs(title = "Sum of precipitations per city and month", y = "precipitations in mm", x = "")
```
Elise: are those missing values or it never rains???

```{r temperature}
data %>% 
  group_by(city, year_month = paste(format(started_at, "%Y-%m"), "-01", sep="")) %>% 
  summarise(mean_temp = mean(temp)) %>% 
  ggplot(mapping = aes(y = mean_temp, x = as.Date(year_month), group = city, colour = city)) + 
    geom_line() +
    geom_point() +
    labs(title = "Average temperature per city and month", y = "temperature in Â°C", x = "")
```
A lot of missing values for Bergen and no data for Trondheim before 2021...

# Linear Model

# Generalised Linear Model with family set to Poisson

# Generalised Linear Model with family set to Binomial

# Generalised Additive Model

# Neural Network

# Support Vector Machine

# Solve an optimisation problem
